<!DOCTYPE html>
<html lang="en" data-layout-decorate="~{fragments/layout}">
<head>
    <title>Stock Market</title>
    <meta charset="utf-8">
    <script type="text/javascript" src="/js/jquery.min.js"></script>
    <script type="text/javascript" src="/js/stockStudy.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        :root {
            --primary-color: #1E3A7B;  /* åŒèŠ±é¡ºæ ‡å¿—è‰² */
            --border-radius: 4px;
            --spacing: 0.8rem;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: "Segoe UI", sans-serif;
            background: #f5f6f8;
            padding: 1rem;
            color: #333;
        }

        /*.container {*/
        /*    max-width: 1200px;*/
        /*    margin: 0 auto;*/
        /*}*/

        /* æŒ‰é’®æ ·å¼ */
        .btn-primary {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 0.6rem 1.2rem;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-size: 0.95rem;
        }

        .btn-primary:hover {
            background: #2c4d8b;
        }

        /* æ¨¡æ€æ¡†æ ·å¼ */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0; top: 0;
            width: 100%; height: 100%;
            overflow-y: auto;
            background-color: rgba(0,0,0,0.4);
        }

        .modal-content {
            background: white;
            margin: 3% auto;
            padding: 2rem;
            border-radius: var(--border-radius);
            width: 90%;
            max-width: 700px;
        }

        .close-btn {
            float: right;
            font-size: 1.5rem;
            cursor: pointer;
            color: #666;
        }

        /* è¡¨å•å¸ƒå±€ */
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: var(--spacing);
            margin-bottom: 1.5rem;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        label {
            font-size: 0.85rem;
            margin-bottom: 0.3rem;
            color: #555;
        }

        input[type="text"],
        input[type="number"] {
            padding: 0.6rem;
            border: 1px solid #ccc;
            border-radius: var(--border-radius);
            font-size: 0.95rem;
        }

        textarea {
            width: 100%;
            min-height: 120px;
            resize: vertical;
            padding: 0.6rem;
            font-family: inherit;
            font-size: 0.95rem;
            border: 1px solid #ccc;
            border-radius: var(--border-radius);
        }

        /* å¯æœç´¢å¤šé€‰ç»„ä»¶ */
        .search-select {
            position: relative;
            border: 1px solid #ccc;
            border-radius: var(--border-radius);
            padding: 0.5rem;
            background: white;
        }

        .search-input {
            width: 100%;
            border: none;
            padding: 0.5rem;
            font-size: 0.95rem;
        }

        .options {
            max-height: 200px;
            overflow-y: auto;
            margin-top: 0.3rem;
            display: none;
        }

        .option-item {
            padding: 0.3rem 0.5rem;
            cursor: pointer;
        }

        .option-item:hover {
            background: #f0f0f0;
        }

        /* æ•°æ®è¡¨æ ¼ */
        .data-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            margin-top: 1rem;
        }

        .data-table th,
        .data-table td {
            padding: 0.8rem;
            text-align: left;
            border-bottom: 1px solid #eee;
            font-size: 0.85rem;
        }

        .data-table th {
            background: #f8f9fa;
        }

        .delete-btn {
            color: red;
            cursor: pointer;
            font-size: 1.1rem;
        }

        /* åˆ†é¡µæ§ä»¶ */
        .pagination {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            margin-top: 1rem;
            flex-wrap: wrap;
        }

        .page-item {
            padding: 0.4rem 0.8rem;
            cursor: pointer;
            border-radius: var(--border-radius);
            transition: background 0.3s;
        }

        .page-item.active {
            background: var(--primary-color);
            color: white;
        }

        .page-item.disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        .action-buttons {
            display: flex;
            gap: 8px;
            justify-content: center;
        }

        .btn-action {
            padding: 6px 10px;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            border: 1px solid transparent;
        }

        .delete-btn {
            background-color: #ffebee;
            color: #c62828;
        }

        .delete-btn:hover {
            background-color: #ffcdd2;
            border-color: #c62828;
        }

        .edit-btn {
            background-color: #e3f2fd;
            color: #1565c0;
        }

        .edit-btn:hover {
            background-color: #bbdefb;
            border-color: #1565c0;
        }

        /* ç§»åŠ¨ç«¯é€‚é… */
        @media (max-width: 768px) {
            .btn-action {
                padding: 4px 8px;
                font-size: 14px;
            }

            .action-buttons {
                gap: 4px;
                flex-wrap: wrap;
            }
        }

        @media (max-width: 600px) {
            .form-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>

<body>
<div class="right_col" role="main" data-layout-fragment="content">
    <div class="clearfix"></div>
    <div class="container">
        <button class="btn-primary" onclick="openModal()">+ æ–°å¢è‚¡ç¥¨</button>

        <!-- æ•°æ®å±•ç¤ºè¡¨æ ¼ -->
        <div class="table-container" style="overflow-x:auto;">
            <table class="data-table" id="dataTable">
                <thead>
                <tr>
                    <th>ä»£ç </th>
                    <th>åç§°</th>
                    <th>ä¸»è¥ä¸šåŠ¡</th>
                    <th>æ‰€å±æ¿å—</th>
                    <th>æ¦‚å¿µ</th>
                    <th>é‡‘é¢(äº¿)</th>
                    <th>æ‰€å±åœ°åŒº</th>
                    <th>æ“ä½œ</th>
                </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>

        <!-- åˆ†é¡µæ§ä»¶ -->
        <div class="pagination" id="pagination"></div>
    </div>

    <!-- å½•å…¥æ¨¡æ€æ¡† -->
    <div class="modal" id="stockModal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal()">&times;</span>
            <h2>è‚¡ç¥¨ä¿¡æ¯å½•å…¥</h2>
            <form id="stockForm" novalidate>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="stockCode">è‚¡ç¥¨ä»£ç </label>
                        <input type="text" id="stockCode" list="codeSuggestions" required>
                        <datalist id="codeSuggestions">
                            <!-- åŠ¨æ€å¡«å……å»ºè®® -->
                        </datalist>
                    </div>

                    <div class="form-group">
                        <label for="stockName">è‚¡ç¥¨åç§°</label>
                        <input type="text" id="stockName" list="nameSuggestions" required>
                        <datalist id="nameSuggestions">
                            <!-- åŠ¨æ€å¡«å……å»ºè®® -->
                        </datalist>
                    </div>
                </div>

                <div class="form-group">
                    <label for="business">ä¸»è¥ä¸šåŠ¡ï¼ˆ300å­—ä»¥ä¸Šï¼‰</label>
                    <textarea id="business" rows="5" required></textarea>
                </div>

                <div class="form-grid">
                    <div class="form-group">
                        <label>æ‰€å±æ¿å—ï¼ˆå¯å¤šé€‰ï¼‰</label>
                        <div class="search-select" onclick="toggleOptions('board')">
                            <input type="text" class="search-input" placeholder="æœç´¢æ¿å—..."
                                   oninput="filterOptions('board', this.value)">
                            <div class="options" id="boardOptions">
                                <!-- æ¿å—é€‰é¡¹åŠ¨æ€ç”Ÿæˆ -->
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>åŒ…å«æ¦‚å¿µï¼ˆå¯å¤šé€‰ï¼‰</label>
                        <div class="search-select" onclick="toggleOptions('concept')">
                            <input type="text" class="search-input" placeholder="æœç´¢æ¦‚å¿µ..."
                                   oninput="filterOptions('concept', this.value)">
                            <div class="options" id="conceptOptions">
                                <!-- æ¦‚å¿µé€‰é¡¹åŠ¨æ€ç”Ÿæˆ -->
                            </div>
                        </div>
                    </div>
                </div>

                <div class="form-grid">
                    <div class="form-group">
                        <label for="amount">è‚¡ç¥¨é‡‘é¢(äº¿)</label>
                        <input type="number" id="amount" step="0.01" min="0" required>
                    </div>

                    <div class="form-group">
                        <label for="region">æ‰€å±åœ°åŒº</label>
                        <input type="text" id="region" list="regionSuggestions" required>
                        <datalist id="regionSuggestions">
                            <option value="åŒ—äº¬">
                            <option value="ä¸Šæµ·">
                            <option value="æ·±åœ³">
                            <option value="æ­å·">
                        </datalist>
                    </div>
                </div>

                <div style="margin-top:1.5rem;">
                    <button type="submit" class="btn-primary">æäº¤</button>
                    <button type="reset" class="btn-primary" style="margin-left:1rem;background:#6c757d;">é‡ç½®</button>
                </div>
            </form>
        </div>
    </div>
</div>
<!--<script>-->
<!--    // æ¨¡æ‹Ÿæ•°æ®å­˜å‚¨-->
<!--    let stockData = [];-->
<!--    const itemsPerPage = 10;-->
<!--    let currentPage = 1;-->

<!--    // æ¿å—/æ¦‚å¿µæ•°æ®ï¼ˆç¤ºä¾‹ï¼‰-->
<!--    const boardOptions = ['ç§‘æŠ€','é‡‘è','åŒ»ç–—','æ¶ˆè´¹','æ–°èƒ½æº','åŠå¯¼ä½“','äººå·¥æ™ºèƒ½','ç”Ÿç‰©åŒ»è¯','æ–°ææ–™','å†›å·¥','ç¯ä¿','æˆ¿åœ°äº§','ä¼ åª’','æ•™è‚²','æ—…æ¸¸','ç‰©æµ','å†œä¸š','æ±½è½¦','ç”µåŠ›','é€šä¿¡'];-->
<!--    const conceptOptions = ['AI','5G','åŒºå—é“¾','å…ƒå®‡å®™','ç¢³ä¸­å’Œ','æ–°èƒ½æºè½¦','å…‰ä¼','èŠ¯ç‰‡','å¤§æ•°æ®','äº‘è®¡ç®—','ç‰©è”ç½‘','æœºå™¨äºº','æ™ºèƒ½é©¾é©¶','VR/AR','æ•°å­—ç»æµ','ç”Ÿç‰©åŒ»è¯','æ¶ˆè´¹å‡çº§','ä¹¡æ‘æŒ¯å…´','ç»¿è‰²èƒ½æº','é‡å­è®¡ç®—'];-->

<!--    // åˆå§‹åŒ–å¤šé€‰ç»„ä»¶-->
<!--    function initMultiSelect() {-->
<!--        const boardContainer = document.getElementById('boardOptions');-->
<!--        const conceptContainer = document.getElementById('conceptOptions');-->

<!--        boardOptions.forEach(option => {-->
<!--            const div = document.createElement('div');-->
<!--            div.className = 'option-item';-->
<!--            div.innerHTML = `-->
<!--                    <label>-->
<!--                        <input type="checkbox" value="${option}">-->
<!--                        ${option}-->
<!--                    </label>-->
<!--                `;-->
<!--            boardContainer.appendChild(div);-->
<!--        });-->

<!--        conceptOptions.forEach(option => {-->
<!--            const div = document.createElement('div');-->
<!--            div.className = 'option-item';-->
<!--            div.innerHTML = `-->
<!--                    <label>-->
<!--                        <input type="checkbox" value="${option}">-->
<!--                        ${option}-->
<!--                    </label>-->
<!--                `;-->
<!--            conceptContainer.appendChild(div);-->
<!--        });-->
<!--    }-->

<!--    // å¤šé€‰ç»„ä»¶æ§åˆ¶-->
<!--    function toggleOptions(type) {-->
<!--        document.querySelectorAll('.options').forEach(el => {-->
<!--            if (el.id !== type + 'Options') el.style.display = 'none';-->
<!--        });-->
<!--        document.getElementById(type + 'Options').style.display =-->
<!--            document.getElementById(type + 'Options').style.display === 'block' ? 'none' : 'block';-->
<!--    }-->

<!--    function filterOptions(type, query) {-->
<!--        const container = document.getElementById(type + 'Options');-->
<!--        const items = container.getElementsByClassName('option-item');-->

<!--        Array.from(items).forEach(item => {-->
<!--            const text = item.textContent.toLowerCase();-->
<!--            item.style.display = text.includes(query.toLowerCase()) ? 'block' : 'none';-->
<!--        });-->
<!--    }-->

<!--    // å…³é—­å¤šé€‰ç»„ä»¶-->
<!--    document.addEventListener('click', function(e) {-->
<!--        if (!e.target.closest('.search-select')) {-->
<!--            document.querySelectorAll('.options').forEach(el => {-->
<!--                el.style.display = 'none';-->
<!--            });-->
<!--        }-->
<!--    });-->

<!--    // è¡¨å•éªŒè¯-->
<!--    document.getElementById('stockForm').addEventListener('submit', function(e) {-->
<!--        e.preventDefault();-->

<!--        // éªŒè¯é‡‘é¢æ ¼å¼-->
<!--        const amount = document.getElementById('amount').value;-->
<!--        if (amount && !/^\d+(\.\d{1,2})?$/.test(amount)) {-->
<!--            alert('è¯·è¾“å…¥æœ‰æ•ˆçš„é‡‘é¢ï¼ˆæœ€å¤šä¸¤ä½å°æ•°ï¼‰');-->
<!--            return;-->
<!--        }-->

<!--        // æ”¶é›†æ•°æ®-->
<!--        const stock = {-->
<!--            code: document.getElementById('stockCode').value,-->
<!--            name: document.getElementById('stockName').value,-->
<!--            business: document.getElementById('business').value,-->
<!--            board: getSelectedValues('board'),-->
<!--            concepts: getSelectedValues('concepts'),-->
<!--            amount: amount,-->
<!--            region: document.getElementById('region').value-->
<!--        };-->

<!--        // æ·»åŠ æ•°æ®-->
<!--        stockData.push(stock);-->
<!--        closeModal();-->
<!--        updateTable();-->
<!--        this.reset();-->
<!--    });-->

<!--    function getSelectedValues(type) {-->
<!--        const container = document.getElementById(type + 'Options');-->
<!--        const checked = container.querySelectorAll('input[type="checkbox"]:checked');-->
<!--        return Array.from(checked).map(cb => cb.value);-->
<!--    }-->

<!--    // æ›´æ–°è¡¨æ ¼-->
<!--    function updateTable() {-->
<!--        const tbody = document.querySelector('#dataTable tbody');-->
<!--        tbody.innerHTML = '';-->

<!--        const start = (currentPage - 1) * itemsPerPage;-->
<!--        const end = start + itemsPerPage;-->
<!--        const pageData = stockData.slice(start, end);-->

<!--        pageData.forEach((stock, index) => {-->
<!--            const row = document.createElement('tr');-->
<!--            row.innerHTML = `-->
<!--                    <td>${stock.code}</td>-->
<!--                    <td>${stock.name}</td>-->
<!--                    <td title="${stock.business}">${stock.business.substring(0, 30)}${stock.business.length>30?'...':''}</td>-->
<!--                    <td>${stock.board.join(', ')}</td>-->
<!--                    <td>${stock.concepts.join(', ')}</td>-->
<!--                    <td>${stock.amount}</td>-->
<!--                    <td>${stock.region}</td>-->
<!--                    <td><span class="delete-btn" onclick="deleteItem(${start + index})">ğŸ—‘ï¸</span></td>-->
<!--                `;-->
<!--            tbody.appendChild(row);-->
<!--        });-->

<!--        renderPagination();-->
<!--    }-->

<!--    function deleteItem(index) {-->
<!--        if (confirm('ç¡®å®šè¦åˆ é™¤è¿™æ¡è®°å½•å—ï¼Ÿ')) {-->
<!--            stockData.splice(index, 1);-->
<!--            updateTable();-->
<!--        }-->
<!--    }-->

<!--    // åˆ†é¡µæ¸²æŸ“-->
<!--    function renderPagination() {-->
<!--        const pagination = document.getElementById('pagination');-->
<!--        pagination.innerHTML = '';-->
<!--        const totalPages = Math.ceil(stockData.length / itemsPerPage);-->

<!--        // ä¸Šä¸€é¡µ-->
<!--        const prev = document.createElement('div');-->
<!--        prev.className = 'page-item' + (currentPage === 1 ? ' disabled' : '');-->
<!--        prev.innerHTML = 'Â«';-->
<!--        prev.onclick = () => {-->
<!--            if (currentPage > 1) {-->
<!--                currentPage&#45;&#45;;-->
<!--                updateTable();-->
<!--            }-->
<!--        };-->
<!--        pagination.appendChild(prev);-->

<!--        // é¡µç -->
<!--        for (let i = 1; i <= totalPages; i++) {-->
<!--            const btn = document.createElement('div');-->
<!--            btn.className = 'page-item' + (currentPage === i ? ' active' : '');-->
<!--            btn.textContent = i;-->
<!--            btn.onclick = () => {-->
<!--                currentPage = i;-->
<!--                updateTable();-->
<!--            };-->
<!--            pagination.appendChild(btn);-->
<!--        }-->

<!--        // ä¸‹ä¸€é¡µ-->
<!--        const next = document.createElement('div');-->
<!--        next.className = 'page-item' + (currentPage === totalPages || totalPages === 0 ? ' disabled' : '');-->
<!--        next.innerHTML = 'Â»';-->
<!--        next.onclick = () => {-->
<!--            if (currentPage < totalPages) {-->
<!--                currentPage++;-->
<!--                updateTable();-->
<!--            }-->
<!--        };-->
<!--        pagination.appendChild(next);-->
<!--    }-->

<!--    // æ¨¡æ€æ¡†æ§åˆ¶-->
<!--    function openModal() {-->
<!--        document.getElementById('stockModal').style.display = 'block';-->
<!--    }-->

<!--    function closeModal() {-->
<!--        document.getElementById('stockModal').style.display = 'none';-->
<!--        document.getElementById('stockForm').reset();-->
<!--        document.querySelectorAll('.options').forEach(el => el.style.display = 'none');-->
<!--    }-->

<!--    // é¡µé¢åŠ è½½åˆå§‹åŒ–-->
<!--    document.addEventListener('DOMContentLoaded', () => {-->
<!--        initMultiSelect();-->
<!--        // å¯é€‰ï¼šåŠ è½½ç¤ºä¾‹æ•°æ®-->
<!--        // stockData.push(...);-->
<!--        updateTable();-->
<!--    });-->
<!--</script>-->
</body>


</html>